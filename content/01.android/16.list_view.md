---
title: ListViewを扱う
description: ListViewの実装について紹介・解説します。
navigation: true
draft: false
date: 2025-09-08T07:00:00+09:00
---

## ListViewでコンテンツ一覧を表示する

### 実装方法

`RecyclerView`の実装と似ているので、すでにそちらを学んでいる方はスムーズに進められます。

1.  `ListView`をレイアウトに配置
2.  `ArrayAdapter`を継承した`CustomAdapter`クラスを実装
3.  表示要素を設定する
4.  `ListView`と`CustomAdapter`を接続する
5.  その他のカスタマイズ（区切り線、クリックリスナーなど）

### 1\. ListViewをレイアウトに配置

画面のレイアウトXMLファイルに`ListView`を配置する。

```xml
<ListView
    android:id="@+id/list_view"
    android:layout_width="match_parent"
    android:layout_height="match_parent"/>
```

### 2\. ArrayAdapterを継承したCustomAdapterクラスを実装

`ArrayAdapter`を継承した`CustomAdapter`を作成する。
コンストラクタで表示するデータのリストを受け取り、`ArrayAdapter`のジェネリクスにそのデータの型を指定する。

```kotlin
class CustomAdapter(context: Context, values: List<Int>) :
    ArrayAdapter<Int>(context, 0, values) {
    override fun getView(position: Int, convertView: View?, parent: ViewGroup): View {
        TODO("このあと実装")
    }
}
```

### 3\. 表示要素を設定する

表示する各アイテムのレイアウトを作成し、`CustomAdapter`でそのViewを生成・設定する。

**レイアウトファイルの用意**
各リストアイテムのレイアウトをXMLファイルで定義する。ここでは`list_view_item.xml`とする。

```xml
<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="wrap_content">

    <TextView
        android:id="@+id/text_view"
        android:layout_width="0dp"
        android:layout_height="50dp"
        android:gravity="center"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="parent" />
</androidx.constraintlayout.widget.ConstraintLayout>
```

**getViewメソッドの実装**

`CustomAdapter`の`getView`メソッドをオーバーライドし、Viewを生成する。

上記のレイアウトを使ってViewを生成し、データを設定する。
なお、`convertView`を利用することで、Viewの再利用が可能になりパフォーマンスが向上する。

```kotlin
class CustomAdapter(context: Context, values: List<Int>) :
    ArrayAdapter<Int>(context, 0, values) {
    override fun getView(position: Int, convertView: View?, parent: ViewGroup): View {
        // Viewの再利用を試みる。convertViewがなければ新しく生成する。
        val view = convertView
            ?: LayoutInflater.from(parent.context).inflate(R.layout.list_view_item, parent, false)
        
        // TextViewにデータを設定する
        val textView: TextView = view.findViewById(R.id.text_view)
        val value = getItem(position)
        textView.text = value.toString()
        return view
    }
}
```

### 4\. ListViewとCustomAdapterを繋ぎこむ

作成した`ListView`に`CustomAdapter`をセットする。

```kotlin
val listView: ListView = findViewById(R.id.list_view)
listView.adapter = CustomAdapter(this, listOf(12, 23, 34, 45))
```

## 区切り線を非表示にする。

`ListView`はデフォルトでアイテム間に区切り線を表示する。
不要な場合は`android:divider="@null"`を設定することで非表示にできる。

```xml
<ListView
    android:id="@+id/list_view"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:divider="@null" />
```

## タップ時の処理を実装する

`OnItemClickListener`を実装する。

```kotlin
listView.setOnItemClickListener { parent, view, position, id ->
    // 要素がタップされた時の処理を記述
}
```

## 速スクロールバーを有効にする

```kotlin
listView.setFastScrollEnabled(true)
```

## 参考

  * [ListView | Android Developers](https://developer.android.com/reference/android/widget/ListView)
  * [ListViewの高速スクローラまわりをカスタマイズ(AbsListView\#setFastScrollEnabled)](https://daichan4649.hatenablog.jp/entry/20111220/1324314528)
