---
title: zxing-android-embedded を扱う
description: zxing-android-embedded による実装方法を紹介・解説します。
navigation: true
draft: false
date: 2025-09-29T07:00:00+09:00
---


**`zxing`**（正式には`zxing-android-embedded`）は、QRコードやバーコードを読み取る機能を簡単に実現できる非常に使いやすいライブラリ。

## zxingを組み込む

### ライブラリの追加 (`app/build.gradle`に追記)

`app/build.gradle`の`dependencies`スコープに以下を追加し、ライブラリを組み込む。

```gradle
dependencies {
  implementation 'com.journeyapps:zxing-android-embedded:4.3.0'
}
```

### `AndroidManifest.xml`に追記

ライブラリの要件に従い、`AndroidManifest.xml`の`<application>`タグに`android:hardwareAccelerated="true"`を追加する。

```xml
<application android:hardwareAccelerated="true" 
    ...>
</application>
```

### 実装

`zxing`ライブラリは、カメラ制御や読み取り結果の解析処理をすべて内部で処理してくれるため、
アプリ側で実装するのは「ライブラリ画面の呼び出し」と「結果の受け取り」のみ。

**`ActivityResultLauncher`**を使ってライブラリの画面を起動し、読み取り結果を受け取る。

#### 1. ActivityResultLauncherの定義

`registerForActivityResult`を使い、読み取り画面のコントラクト（`ScanContract`）と結果を受け取るコールバックを実装する。

```java
private final ActivityResultLauncher<ScanOptions> barcodeLauncher = registerForActivityResult(new ScanContract(), result -> {
    if(result.getContents() == null) {
        // ユーザーがスキャンをキャンセルした場合
        Toast.makeText(this, "Cancelled", Toast.LENGTH_LONG).show();
    } else {
        // スキャン成功
        Toast.makeText(this, "Scanned: " + result.getContents(), Toast.LENGTH_LONG).show();
    }
});
```

#### 2. スキャン画面の起動

ボタンタップなどのイベントを契機に、定義した`barcodeLauncher`を呼び出す。
`ScanOptions`オブジェクトを渡すことで、QRコードだけでなくバーコードなどもスキャンできる。

```java
public void launch(View view) {
    // スキャン画面を起動
    barcodeLauncher.launch(new ScanOptions());
}
```

## 参考

* [journeyapps/zxing-android-embedded: Barcode scanner library for Android, based on the ZXing decoder](https://github.com/journeyapps/zxing-android-embedded)
* [[Android] zxingでQRコードを読み取る時に画面が横回転しないようにする \#Kotlin - Qiita](https://qiita.com/tktktks10/items/3b327b2900d38e672996)